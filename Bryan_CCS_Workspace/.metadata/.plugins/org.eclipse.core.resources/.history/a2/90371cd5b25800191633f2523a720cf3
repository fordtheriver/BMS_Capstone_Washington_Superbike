#include "UART_to_USB.h"
#include <msp430.h>


void UARTsend(char *message){
    volatile char i = 0;
        while( *(message + i) !='\0'){
            UCA1TXBUF = *(message + i);
            while(UCA1STAT&UCBUSY);
            i++;
        }
}

void UARTinit(){
    //Initialize UART on MSP430
    P4SEL |= 0x030;         // P4.4 and P4.5 = USCI_A1 TXD/RXD 00110000
    UCA1CTL1 |= UCSWRST;    // Set reset bit. Put state machine in reset mode          (940)
    UCA1CTL1 |= UCSSEL_1;   // Choose 32768 Hz. (CLK A)                 (948)
    UCA1BR0 = 3;            // Sets Baud rate at 9600
    UCA1BR1 = 0x00;
    //UCA1MCTL = 0x06;
    UCA1MCTL = UCBRS_3 + UCBRF_0;// Modulation UCBRSx=3, UCBRFx=0
    //UCA1CTL0 = 0x00;
    UCA1IE |= UCRXIE;
    UCA1CTL1 &= ~UCSWRST;   // Enables transmit/receive
    //enable interrupts


}
